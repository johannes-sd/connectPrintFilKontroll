    {{> head}}
<body>
    {{> toppmeny}}

        <div id="Velkommen">
                
                
            <table class="display">
                <thead>
                    <tr>
                        <th>
                            Connect-filer
                        </th>
                    </tr>
                </thead>
            </table>
        </div>

    {{> printModal}}


    </body>
    <!--{{> printModalScript}}-->
    <script>
    
 
$(document).ready(function() {

    var tabell = $('.display').DataTable( {
        "ajax" : {
            "url": "/filliste",
            "contentType": "application/json",
            "type": "POST"
        },
        "columns" : [{"data" : null}],
        "select" : "os"

    });

    new $.fn.dataTable.Buttons( tabell, {
        name: "commands",
        buttons: [{
            text: "Print",
            action: (e, dt, node, config) => {
                let valgteElementer = tabell.rows({selected: true}).data().toArray();
                let printer = $("nav select#printere otpion:selected").val();
                alert("Printer er ", printer);
                $.ajax({
                    async : true,
                    "crossDomain": false,
                    url: "/printe",
                    method: "POST",
                        "headers": {
                        "content-type": "application/json",
                        "cache-control": "no-cache",
                        "sentraldistribusjon-token": "0e6f12f6-c483-6df3-2d3a-5b6816b30638"
                      },
                    processData : false,
                    dataType : 'json',
                    data : JSON.stringify(valgteElementer),
                    success: (res) =>{
                        console.log("RES :", res);
                    }
                })
            }
        },{
            text: "Print scannelister",
            action: (e, dt, node, config) => {
                //alert("Knappeliknapp er trykket");
                sendScanneliste();
            }
        }]
    });

    tabell.buttons(0, null).container().appendTo('nav');

    //Markere valgte elementer
    $('.display table').on( 'click', 'tr', function () {
        if ( $(this).hasClass('selected') ) {
            $(this).removeClass('selected');
            console.log($(this));
        }
        else {
            tabell.$('tr.selected').removeClass('selected');
            $(this).addClass('selected');
            console.log($(this));
        }
    });

    function sendScanneliste() {
        let valgteElementer = tabell.rows({selected: true}).data().toArray();
        if(valgteElementer.length === 0) {
            alert("Du har ikke valgt noen filer fra listen!");
            return;
        }
        else {
        console.log(valgteElementer);
        }
    };



    //Tester knapp for print.
    $( "#scanneliste" ).click(function() {
        alert( "Handler for .click() called.");
        var noedata = tabell.rows({selected: true}).data().toArray();  //Innebygd API for h√•ndtering av rows.
        console.log(JSON.stringify(noedata, undefined, 2));
      });



});
    
    </script>
    {{> printModalScript}}
</html>